<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Codename Index</title>
    <link rel="stylesheet" href="src/styles.css">
    <script>
        // HTML head loaded diagnostic
        console.log('HTML head loaded');
        
        // Body start diagnostic function
        function logBodyStart() {
            console.log(' === BODY START DIAGNOSTIC ===');
            console.log(' Body start time: ' + new Date().toISOString());
            console.log(' Document readyState at body start: ' + document.readyState);
            console.log(' Scripts at body start: ' + document.scripts.length);
            console.log(' === END BODY START ===');
        }
        
        // Script loading diagnostic function
        function logScriptLoading() {
            console.log(' === SCRIPT LOADING DIAGNOSTIC ===');
            console.log(' About to load app.js');
            console.log(' Current document readyState: ' + document.readyState);
            console.log(' Current script count: ' + document.scripts.length);
            console.log(' === END SCRIPT LOADING ===');
        }
        
        // App script loading diagnostic function
        function logAppScriptLoading() {
            console.log(' === APP SCRIPT LOADING ===');
            console.log(' Creating script element for: src/app.js');
            console.log(' Loading script from: src/app.js?v=' + Math.random());
            console.log(' Script element added to document');
            console.log(' === END APP SCRIPT LOADING ===');
        }
    </script>
</head>
<body onload="logBodyStart()">
    <div class="app_container">
        <header class="app_title">
            <h1>codename index</h1>
        </header>
        
        <div class="app_content">
            <div class="main_container">
                <div class="left_column">
                    <div class="filter_container">
                        <div class="filter_group">
                            <div class="filter_top_row">
                                <div class="search_controls">
                                    <input type="text" id="name_search_input" placeholder="Search names...">
                                    <button id="name_search_clear" class="filter_action">âœ•</button>
                                    <button id="root_open_all" class="filter_action" title="Open All Root Groups">â–¶</button>
                                </div>
                                <div class="filter_buttons filter_buttons_inline">
                                    <button id="filter_function" class="filter filter_active">Function</button>
                                    <button id="filter_variable" class="filter filter_active">Variable</button>
                                    <button id="filter_class" class="filter filter_active">Class</button>
                                    <button id="filter_parameter" class="filter filter_active">Parameter</button>
                                    <button id="filter_constant" class="filter filter_active">Constant</button>
                                    <button id="filter_event" class="filter filter_active">Event</button>
                                    <button id="filter_property" class="filter filter_active">Property</button>
                                    <button id="filter_file" class="filter filter_active">File</button>
                                    <button id="filter_window" class="filter filter_active">Window</button>
                                </div>
                                <div class="reset_controls">
                                    <button id="filter_reset_all" class="filter_action">Reset All</button>
                                </div>
                            </div>
                            <div class="filter_buttons filter_buttons_wrap">
                                <!-- Filter buttons will be moved here via CSS for smaller screens -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="index_container">
                        <div id="index" class="index">
                            <!-- Names will be inserted here by JavaScript -->
                        </div>
                    </div>
                </div>
                
                <div class="right_column">
                    <div id="placeholder_panel" class="placeholder_panel">
                        <div class="placeholder_content">
                            <div class="placeholder_icon">ðŸ‘†</div>
                            <div class="placeholder_text">Click on a name to view details</div>
                        </div>
                    </div>
                    
                    <!-- Lookup container will be created by JavaScript -->
                </div>
            </div>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOMContentLoaded event fired');
            console.log('Scripts found:', document.scripts.length);
            
            // Log all scripts for debugging
            for (let i = 0; i < document.scripts.length; i++) {
                const script = document.scripts[i];
                console.log('Script ' + i + ':', script);
            }
            
            // Log HTML structure
            console.log('=== HTML STRUCTURE DIAGNOSTIC ===');
            console.log('Document URL:', document.URL);
            console.log('Document baseURI:', document.baseURI);
            console.log('Document charset:', document.charset);
            console.log('Document contentType:', document.contentType);
            console.log('Document doctype:', document.doctype);
            console.log('Document readyState:', document.readyState);
            console.log('Document scripts:', document.scripts.length);
            console.log('Document stylesheets:', document.styleSheets.length);
            console.log('=== END HTML STRUCTURE ===');
            
            // Load app.js dynamically
            logScriptLoading();
            logAppScriptLoading();
            
            const script = document.createElement('script');
            script.src = 'src/app.js?v=' + Math.random();
            
            script.onload = function() {
                console.log('Script loaded successfully:', script.src);
                console.log('Script readyState:', script.readyState);
                console.log('Document readyState:', document.readyState);
                
                try {
                    console.log('Script initialized successfully');
                    document.dispatchEvent(new Event('app-initialized'));
                } catch (error) {
                    console.error('Error initializing script:', error);
                }
            };
            
            script.onerror = function() {
                console.error('Failed to load script:', script.src);
            };
            
            document.body.appendChild(script);
            
            // Additional code to check if app is initialized
            setTimeout(function() {
                console.log('Script loading complete and initialized');
                
                // Call app_init directly as a fallback
                if (typeof app_init === 'function') {
                    console.log('Calling app_init...');
                    app_init();
                } else {
                    console.error('app_init is not defined after script load');
                }
            }, 500);
        });
    </script>
</body>
</html> 